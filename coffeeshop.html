<!doctype html>

<html>
<head>
    <title>Кав'ярня</title>
    <link rel="shortcut icon" href="imgs/favicon.png" type="image/png">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="preloader.css">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="js/aro_coffee.js"></script>
</head>

<body>

<!-- Прелоадер -->
<div class="preloader">
    <div class="preloader__row">
        <div class="preloader__item"></div>
        <div class="preloader__item"></div>
    </div>
</div>

<!-- кнопка вверх -------------------------------------------------------------------------------->
<a id="buttonup"></a>

<!-- Modal --------------------------------------------------------------------------------------->
<div class="modal fade" id="modalBuy" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenterTitle">Сделать заказ</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form class="modal-body" novalidate>

                <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="inputGroup-sizing-sm">Ваше имя</span>
                    </div>
                    <input type="name" id="custumerName" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" placeholder="например, Олег" required>
                    <div class="invalid-feedback">
                        Please provide a valid state.
                    </div>
                </div>

                <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="inputGroup-sizing-sm">Ваш телефон</span>
                    </div>
                    <input type="tel" id="custumerTel" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" placeholder="+380070070700" required>
                </div>

                <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="inputGroup-sizing-sm">Ваш e-mail</span>
                    </div>
                    <input type="email" id="custumerEmail" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm" placeholder="your@e.mail" required>
                </div>
                
                <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                        <label class="input-group-text" for="custumerQuantity">Количество</label>
                    </div>
                    <select class="custom-select" id="custumerQuantity" required>
                        <option selected>Выберите количество</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                    </select>
                  </div>
            </form>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                <button type="submit" id="submit" class="btn btn-primary">Отправить</button>
            </div>
        </div>
    </div>
</div>





<header class="header">
    <div class="logo">Aromaniac</div>
        
    <div class="container">
        <div class="row">
            <div class="col-12">

                <div class="main">
                    <nav class="navbar navbar-expand-lg navbar-light">
                        <a class="brandinmenu" href="index.html">
                            Кав'ярня "Aromaniac"
                        </a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarText">
                            <ul class="navbar-nav ml-auto">
                                <li id="liid1" class="nav-item">
                                    <a class="nav-link" href="index.html">Додому</a>
                                </li>
                                <li id="liid2" class="nav-item active">
                                    <a class="nav-link" href="#">Кав'ярня<span class="sr-only">(current)</span></a>
                                </li>
                                <li id="liid3" class="nav-item">
                                    <a class="nav-link" href="sweetshop.html">Крамниця</a>
                                </li>
                                <li id="liid4" class="nav-item">
                                    <a class="nav-link" href="contacts.html">Контакти</a>
                                </li>
                                <li id="liid5" class="nav-item">
                                    <a class="nav-link" href="about.html">Про нас</a>
                                </li>
                            </ul>
                        </div>
                    </nav>

                </div>
            </div>
        </div>
    </div> 
</header>


<div class="wrapper">

    <div class="container content">
        <div class="row">
            <div class="col-md-3">
                <div class="list-group">
                    <!-- Тут менюшечка -->
                </div>
            </div>

            <div class="col-md-9 products">
                <div class="list-goods">
                    <!-- Тут товары -->
                </div>
            </div>

        </div>
    </div>
    
</div>



<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <p class="footerlogo">Aromaniac</p>
                <span>Краща кав'ярня м. Маріуполь.</span>
            </div>
            <div class="col-md-4">
                <p>Ми в соцмережах:</p>
                <p><a href="https://telegram.org" target="_blank">telegram</a></p>
                <p><a href="https://www.instagram.com/?hl=ru" target="_blank">instagram</a></p>
            </div>
            <div class="col-md-4">
                <p>Телефони:</p>
                <p><a href="tel:0001234567">(000) 123-45-67</a></p>
                <p><a href="tel:0011234567">(001) 123-45-67</a></p>
            </div>
        </div>
    </div>
</footer>




<!-- script area -->

<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script src="https://smtpjs.com/v3/smtp.js"></script>

<!-- preloader ---------------------------------------------------------------------------------->
<script>
    window.onload = function () {
        document.body.classList.add('loaded_hiding');
        window.setTimeout(function () {
            document.body.classList.add('loaded');
            document.body.classList.remove('loaded_hiding');
        }, 500);
    }
</script>

<!-- UP button ---------------------------------------------------------------------------------->
<script>
    var btn = $('#buttonup');
    $(window).scroll(function() {
        if ($(window).scrollTop() > 100) {
            btn.addClass('show');
        } else {
            btn.removeClass('show');
        }
    });
    
    btn.on('click', function(e) {
        e.preventDefault();
        $('html, body').animate({
            scrollTop:0
        }, '100');
    });
</script>

<!-- Menu -------------------------------------------------------------------------------------->
<script>


    var goodsid, goodsname, goodsprice;
    var custumerName, custumerEmail, custumerTel, custumerQuantity;

    coffeemenu.forEach(i => {
    
        $('.list-group').append('<a href="#' + i.anchor + '" class="list-group-item">' + i.type + '</a>');

        var goods = i.goods;
        var str = '<div class="row">';

        goods.forEach(i1 => {
            str += '<div id="' + i.anchor + '" class="col-sm-4"><div class="product"><p class="product-title"><a href="#">' + i1.name + '</a></p>';
            str += '<div class="product-img"><a href="#" class="test" data-target="#modalBuy" data-id="' + i1.id + '" data-name="' + i1.name + '" data-price="' + i1.price + '">';
            str += '<img src="' + i1.thumb + '" alt=""></a></div>'
            str += '<p class="product-desc">' + i1.descr + '</p><p class="product-price">Ціна: ' + i1.price + ' грн.</p></div></div>';
        });
        
    str += '</div>';
    $('.list-goods').append(str);
    });

    $('body').on('click', '.test', function(e){
        e.preventDefault();
        // console.log(1);
        var tempid = $(this).attr('data-id');
        var tempname = $(this).attr('data-name');
        var tempprice = $(this).attr('data-price');
        sendorder(tempid, tempname, tempprice);
        

    })

</script>

<!-- Buy --------------------------------------------------------------------------------------->
<script>
    function sendorder(id, name, price) {

        $('#modalBuy').modal({keyboard: false});
        $('#exampleModalCenterTitle').text('Заказ: ' + name);
        goodsid = id;
        goodsname = name;
        goodsprice = price;
    }

    $('#submit').on('click', function(e) {
        
        var custumerName = document.getElementById("custumerName").value;
        var custumerEmail = document.getElementById("custumerEmail").value;
        var custumerTel = document.getElementById("custumerTel").value;
        var custumerQuantity = document.getElementById("custumerQuantity").value;
        
        console.log('Имя: ' + custumerName + '\n\rТелефон: ' + custumerTel +
            '\n\rE-mail: ' + custumerEmail + '\n\rЗаказ: ' + goodsname + ', ' + custumerQuantity + ' шт.');
        $('#modalBuy').modal('toggle');

        // ПОТОМ УБЕРИ КОММЕНТАРИЙ!!!
        Email.send({
            Host : "smtp.gmail.com",
            Username : "reallyreallyexcited@gmail.com",
            Password : "enaxpadoptfxayjz",
            //SecureToken : "c1d1c2f8-86e0-42b9-9aaf-5b6531945e4c",
            //To : 'klimenko.a.aleksandra@gmail.com',
            To : custumerEmail,
            //To : "it-dn@ukr.net",
            From : "reallyreallyexcited@gmail.com",
            Subject : "Кофейня Aromaniac",
            Body : "Здравствуйте, " + custumerName + "! Спасибо за ваш заказ: " + goodsname + ", " + custumerQuantity + " шт. К оплате: " + (goodsprice * custumerQuantity) + " грн."
        }).then(
        //message => alert(id + " | " + message)
        );      
    })
    
</script>










</body>
</html>


